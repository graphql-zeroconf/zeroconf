# Zeroconf

The simplest way to start graphql with zero configuration on existing database.

Zeroconf supports to generate C.R.U.D API automatically. It has powerful where clauses for query and also has interface which called hook in each C.U.D mutations.

## Get Started

MySQL, MariaDB

[https://github.com/graphql-zeroconf/zeroconf_mysql_template](https://github.com/graphql-zeroconf/zeroconf_mysql_template)

Postgres

[https://github.com/graphql-zeroconf/zeroconf_postgresql_template](https://github.com/graphql-zeroconf/zeroconf_postgresql_template)


SQLite

[https://github.com/graphql-zeroconf/zeroconf_sqlite_template](https://github.com/graphql-zeroconf/zeroconf_sqlite_template)

MSSQL

[https://github.com/graphql-zeroconf/zeroconf_mssql_template](https://github.com/graphql-zeroconf/zeroconf_mssql_template)



## Support Generating C.R.U.D API

Lets say that we have user table on our database. In this case zeroconf CRUD schema will be generated with its table name.

The zeroconf will generates object types and mutations, queries over the your table name.

  If you have a table which named **user**, zeroconf will generate these things.

  - type **User**
  - Query { **user**, **users**, **numUser** }
  - Subscription { **user**, **users**, **numUser** }
  - Mutation { **createUser**, **updateUsers**, **deleteUser** }

### Automatically Generated Queries:

- generated singluar name Query field for fetching one row

  **user**(**where**: UserWhereInput!): User

- generated plural name Query field for fetching all row on some query condition:

  **users**(**limit**: Int, **start**: Int, **where**: JSON, **order**: UserOrderInput)

### Automatically Generated Subscriptions:

If you want to subscribe for data streaming, use the Subscription.

- generated singluar name Subscription field for fetching one row

  **user**(**where**: UserWhereInput!): User

- generated plural name Subscription field for fetching all row on some query condition:

  **users**(**limit**: Int, **start**: Int, **where**: JSON, **order**: UserOrderInput)

### Automatically Generated Mutations:

- Creation

  **_createUser_**(input: UserCreationInput!): User

- Update:

  **_updateUser_**(where: UserWhereInput!, input: UserUpdateInput!): User

- Delete:

  **_deleteUser_**(input: UserCreationInput!): User

## Sequelize ORM

The Zeroconf also uses sequelize orm in its core and has operatorAliases for complex where clauses like below. so you can see that query manual for use it.

```javascript

// The default contained operatorsAliases.

const operatorsAliases = {
  $eq: Op.eq,
  $ne: Op.ne,
  $gte: Op.gte,
  $gt: Op.gt,
  $lte: Op.lte,
  $lt: Op.lt,
  $not: Op.not,
  $in: Op.in,
  $notIn: Op.notIn,
  $is: Op.is,
  $like: Op.like,
  $notLike: Op.notLike,
  $iLike: Op.iLike,
  $notILike: Op.notILike,
  $regexp: Op.regexp,
  $notRegexp: Op.notRegexp,
  $iRegexp: Op.iRegexp,
  $notIRegexp: Op.notIRegexp,
  $between: Op.between,
  $notBetween: Op.notBetween,
  $overlap: Op.overlap,
  $contains: Op.contains,
  $contained: Op.contained,
  $adjacent: Op.adjacent,
  $strictLeft: Op.strictLeft,
  $strictRight: Op.strictRight,
  $noExtendRight: Op.noExtendRight,
  $noExtendLeft: Op.noExtendLeft,
  $and: Op.and,
  $or: Op.or,
  $any: Op.any,
  $all: Op.all,
  $values: Op.values,
  $col: Op.col
};
```

As of result, You can query to the graphql server like this.

```graphql

query {
  users(
    where: {
      or: [{ user_id: 1, user_id: 2 }]
    }
  ) {
    user_id
    email
  }
}
```

## Set the sequelize options

As we mentioned before that zeroconf contains node sequelize. You can use other options for sequelize to initialize. After clone the repository zeroconf_template and open the file `.sequelize.cfg.js`. Edit options and add more you needed. If you want to know more options on sequelize, please refer to the link below to set up other options.

Sequlize Doc: [https://sequelize.readthedocs.io/en/1.7.0/docs/usage/](https://sequelize.readthedocs.io/en/1.7.0/docs/usage/)


### Child Relations

If table has the column id and it has foreign key which refers to the other tables.
zeroconf generates sub-fields for graph query.

```
# The bond table
bond
| id
| contract_num
| loan_request_id -> foreign key refers to the loan_request table
| ....more

# The loan_request table
loan_request
| id -> referred from foreign key bond.loan_request_id of bond table
| user_id
| ....more

# Since bond table has a foreign key loan_request_id which refers to the loan_request table, loanRequest and loanRequests will be generated.

type Bond {
  id
  -> loanRequest # generated by checking foreign key
  -> loanRequests # generated by checking foreign key
}

# So you can query like below.

query {
  bonds {
    id
    contract_num
    loanRequest {
      user_id
    }
  	loanRequests {
      user_id
    }
  }
}

# And you can see the result of a query like below.
{
  "data": {
    "bonds": [
      {
        "id": "246",
        "contract_num": "0000246-20181116",
        "loanRequest": {
          "user_id": 4897
        },
        "loanRequests": [
          {
            "user_id": 4897
          }
        ]
      },
      {
        "id": "247",
        "contract_num": "0000247-20181126",
        "loanRequest": null,
        "loanRequests": []
      },
      ...more
    ]
  }
}
```
